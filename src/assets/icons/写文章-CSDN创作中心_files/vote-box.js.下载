"use strict";!function(e){var n=window.jQuery||{},o=void 0,t=window.document;e.voteBox=e.voteBox?e.voteBox:{},e.voteBox.version="1.1.5",o=n===window.jQuery;var r={},i=function(e,n,o){window.addEventListener?function(){e.addEventListener(n,o,!1)}():function(){e.attachEvent("on"+n,o)}()},a=function(e,n,o){window.removeEventListener?function(){e.removeEventListener(n,o,!1)}():function(){e.detachEvent("on"+n,o)}()},d=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(){var e=t.head,n=e.firstElementChild||e.firstChild,o=document.createElement("style");o.innerText="\n      .vote-box {\n        position: relative;\n        width: 600px;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        overflow: hidden;\n      }\n      .vote-box.csdn-vote {\n        transform: unset;\n        top: unset;\n        left: unset;\n        width: unset;\n      }\n      .vote-box::-webkit-scrollbar {\n        width: 4px;\n      }\n      .vote-box::-webkit-scrollbar-thumb {\n        background: rgba(142, 149, 154, 0.2);\n        border-radius: 2px;\n      }\n      .vote-box .pos-box {\n        position: relative;\n        padding-top: 65px;\n        box-sizing: content-box;\n        visibility: hidden;\n      }\n      .vote-box .pos-box.pt0 {\n        padding-top: 0;\n      }\n      .vote-box .vote-title-box {\n        margin-bottom: -2px;\n        margin-top: -65px;\n        position: relative;\n        display: flex;\n        padding: 24px 24px 16px;\n        font-size: 18px;\n        background-color: #fff;\n        font-weight: 600;\n        line-height: 1;\n      }\n      .vote-box .vote-title-box .btn-close {\n        position: absolute;\n        top: 18px;\n        right: 24px;\n        border: none;\n        background-color: transparent;\n      }\n      .vote-box .vote-frame {\n        width: 100%;\n        height: 100%;\n        border: none;\n      }\n      .vote-box-mask {\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background-color: rgba(0, 0, 0, 0.6);\n        z-index: 99;\n        overflow: auto;\n      }\n      .vote-box-mask::-webkit-scrollbar {\n        width: 4px;\n      }\n      .vote-box-mask::-webkit-scrollbar-thumb {\n        background: rgba(142, 149, 154, 0.2);\n        border-radius: 2px;\n      }\n    ",e.insertBefore(o,n)},c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",t=e;t>0;--t)o+=n[Math.floor(Math.random()*n.length)];return o},v=function(e,n,o){var t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i="\n      "+(r?'<div class="vote-box">':"")+'\n        <div class="pos-box '+(t?"pt0":"")+'">\n          '+(t?"":'\n            <div class="vote-title-box">\n              '+o+'\n              <button class="btn-close" title="关闭"><span style="display: inline-block; color: rgb(153, 153, 153); font-size: 22px; cursor: pointer; user-select: none;">×</span></button>\n            </div>\n          ')+'\n          <iframe\n            class="vote-frame"\n            name="'+e+'"\n            src="'+n+'"\n            frameborder="0"\n            scrolling="no"\n          ></iframe>\n        '+(r?"</div>":"")+"\n      </div>\n    ";if(r){var a=document.createElement("div");return a.className="vote-box-mask",a.innerHTML=i,a}var d=document.createElement("div");return d.className="vote-box csdn-vote",d.innerHTML=i,d},l=function(e,n,o){return e+(-1===e.indexOf("?")?"?":"&")+n+"="+o},p=function(n){var o={source:n.source||0,isDark:n.isDark||!1,domain:n.domain||"csdn.net",from:n.from,voteFrameSrc:n.voteFrameSrc,voteAppendFrameSrc:n.voteAppendFrameSrc,beforeInit:n.beforeInit||null,ininted:n.inited||null,show:n.show||null,showAppend:n.showAppend||null,hide:n.hide||null,hideAppend:n.hideAppend||null};if(o.beforeInit&&!o.beforeInit())return e.voteBox=void 0,delete e.voteBox,!1;n.from&&(o.voteAppendFrameSrc=l(n.voteAppendFrameSrc,"from",n.from),o.voteFrameSrc=l(n.voteFrameSrc,"from",n.from)),n.isDark&&(o.voteAppendFrameSrc=l(n.voteAppendFrameSrc,"isdark",n.isDark),o.voteFrameSrc=l(n.voteFrameSrc,"isdark",n.isDark)),t.domain=o.domain,r=o,"function"===d(o.ininted)&&o.ininted()},m=function(e){var n={domain:"csdn.net",from:encodeURIComponent(window.location.origin),source:0,beforeInit:null,isDark:!1,voteFrameSrc:"https://app-blog.csdn.net/component/vote",voteAppendFrameSrc:"https://app-blog.csdn.net/component/vote_append",ininted:null};for(var o in e)n[o]=e[o];p(n)},u=function(e){var n=r,o=n.voteAppendFrameSrc,t=n.isDark,i=n.source;if(0===parseInt(i))return console.warn("The csdn.appendVoteBox can not show without source."),null;e&&(o=l(o,"id",e)),t&&(o=l(o,"isdark",1)),parseInt(i)&&(o=l(o,"source",i));var a=c();return o=l(o,"pageid",a),{pageId:a,dom:v("appendVoteFrame",o,e?"编辑投票":"添加投票")}},f=function(e,n,o){if(!e)return console.warn("The csdn.voteBox can not show without voteId."),null;var t=r,i=t.voteFrameSrc;e&&(i=l(i,"id",e)),n&&(i=l(i,"voteusername",n)),o&&(i=l(i,"isdark",1));var a=c();return i=l(i,"pageid",a),{pageId:a,dom:v("voteFrame",i,"",!0,!1)}};e.voteBox.showAppend=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u(e.id),o=function o(t){if("message"===t.type){var r=t.data.data;if(!r)return!1;var i=n.pageId;if(r.pageId!==i)return!1;switch(t.data.type){case"bodyHeight":n.dom.style.opacity="1";var d=n.dom.querySelector(".pos-box");d.style.height=r.height+"px",d.style.visibility="visible";break;case"appendVote":e.appendVote&&e.appendVote(r)&&(h(n.dom),a(window,"message",o));break;case"appendFaild":e.appendFaild&&e.appendFaild(r);break;case"removeVote":e.removeVote&&(e.removeVote(),h(n.dom),a(window,"message",o));break;case"hide":h(n.dom),a(window,"message",o)}}};if(i(window,"message",o),n.dom){"function"===d(e.show)&&i(n.dom,"load",function(){e.show(n.dom)});var r=n.dom.querySelector(".btn-close");i(r,"click",function(){h(n.dom)}),t.scrollingElement.style.overflow="hidden",t.body.appendChild(n.dom)}return n.dom},e.voteBox.show=function(e){var n=f(e.id,e.voteusername,e.isdark);if(!n.dom)return!1;var o=e.posDom;"string"===d(o)&&(o=t.querySelector(o)),o=/^html([a-z]*)element$/i.test(d(o))?o:t.body;var r=function t(r){if("message"===r.type){var i=r.data.data;if(!i)return!1;var d=n.pageId;if(i.pageId!==d)return!1;switch(r.data.type){case"bodyHeight":n.dom.style.opacity="1";var s=o.querySelector(".pos-box");s.style.height=i.height+"px",s.style.visibility="visible";break;case"voted":e.afterVote&&(e.afterVote(i),w(n.dom),a(window,"message",t));break;case"needLogin":e.needLogin&&e.needLogin();break;case"voteFaild":e.voteFaild&&e.voteFaild(i);break;case"removeDom":w(n.dom),a(window,"message",t)}}};return i(window,"message",r),n.dom&&("function"===d(e.show)&&i(n.dom,"load",function(){e.show(n.dom)}),o.appendChild(n.dom)),n.dom};var b,h=e.voteBox.hideAppend=function(e){t.scrollingElement.style.overflow="",e&&e.remove()},w=e.voteBox.hide=function(e){e&&e.remove()},x=function(){return e&&e.voteBox&&e.voteBox.voteBoxParams||{}},g=function(){s();var e=x();m(e)},y=function(e){var n=!1,o=function(){n||(n=!0,e&&e())};!function e(){try{t.documentElement.doScroll("left")}catch(n){return void setTimeout(e,50)}o()}(),t.onreadystatechange=function(){"complete"===t.readyState&&(t.onreadystatechange=null,o())}},k=function(e){document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(function(){e&&e()},0):(b=function(){document.removeEventListener("DOMContentLoaded",b,!1),e()},document.addEventListener("DOMContentLoaded",b,!1)):document.attachEvent&&y(e)};!function(){o&&n(function(){g()})||k(g)}()}(window.csdn=window.csdn||{});