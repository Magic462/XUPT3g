/*
 Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
*/
(function(){var m={exec:function(g){var a=g.getCommand("blockquote").state,k=g.getSelection(),b=k&&k.getRanges()[0],h=g.document.createElement("div");h.append(b.cloneContents());if(!(0<h.find(".link-card-box").count())&&b){h=k.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,c=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(c&&"blockquote"==c.getParent().getName())for(d=c;d=d.getPrevious();)if(d.type==
CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){c.move(d);break}}var f=b.createIterator();f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),c=h.shift(),b.insertNode(a),a.append(new CKEDITOR.dom.text("﻿",g.document)),b.moveToBookmark(c),b.selectNodeContents(a),b.collapse(!0),c=b.createBookmark(),e.push(a),h.unshift(c));d=e[0].getParent();b=[];for(c=
0;c<e.length;c++)a=e[c],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(c=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(c)||b.push(a);c=a}for(;0<b.length;)if(a=b.shift(),"blockquote"==a.getName()){for(c=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)c.append(a.getFirst().remove()),e.push(c.getLast());c.replace(a)}else e.push(a);b=g.document.createElement("blockquote");for(b.insertBefore(e[0]);0<
e.length;)a=e.shift(),b.append(a)}else if(a==CKEDITOR.TRISTATE_ON){c=[];for(d={};a=f.getNextParagraph();){for(e=b=null;a.getParent();){if("blockquote"==a.getParent().getName()){b=a.getParent();e=a;break}a=a.getParent()}b&&e&&!e.getCustomData("blockquote_moveout")&&(c.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<c.length;)f=c.shift(),b=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):
f.remove().insertAfter(b):f.remove().insertBefore(b),b.getCustomData("blockquote_processed")||(e.push(b),CKEDITOR.dom.element.setMarker(d,b,"blockquote_processed",!0)),a.push(f);CKEDITOR.dom.element.clearAllMarkers(d);for(c=e.length-1;0<=c;c--){b=e[c];a:{d=b;for(var f=0,m=d.getChildCount(),l=void 0;f<m&&(l=d.getChild(f));f++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d=!1;break a}d=!0}d&&b.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(b=!0;a.length;)if(f=a.shift(),"div"==f.getName()){c=
new CKEDITOR.dom.documentFragment(g.document);!b||!f.getPrevious()||f.getPrevious().type==CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary()||c.append(g.document.createElement("br"));for(b=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(c);b&&c.append(g.document.createElement("br"));c.replace(f);b=!1}}k.selectBookmarks(h);g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",
1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"blockquote",icontype:".svg",iconoffset:"center",iconbgsize:"16px",hidpi:!1,init:function(g){g.blockless||
(g.addCommand("blockquote",m),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"insert,10"}))}})})();