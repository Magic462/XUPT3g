/*
 Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
*/
(function(){function n(a){CKEDITOR.tools.extend(this,a);this.queue=[];this.init?this.init(CKEDITOR.tools.bind(function(){for(var a;a=this.queue.pop();)a.call(this);this.ready=!0},this)):this.ready=!0}function q(a){a.widgets.add("insCodeSnippet",{allowedContent:"div(csdn-data-inscode)[data-inscode-*]; div(inscode-bg); img[src,alt]; p",requiredContent:"div(csdn-data-inscode)",upcast:function(a,b){if("div"==a.name&&-1<a.classes.indexOf("csdn-data-inscode"))return b.editurl=a.attributes["data-inscode-editurl"],
b.embedurl=a.attributes["data-inscode-embedurl"],b.previewurl=a.attributes["data-inscode-previewurl"],b.cover=a.attributes["data-inscode-cover"],b.id=a.attributes["data-inscode-id"],b.name=a.attributes["data-inscode-name"],a.setHtml('\x3cp class\x3d"title"\x3e'+b.name+'\x3c/p\x3e\r\n          \x3cimg src\x3d"'+(b.cover?b.cover:"https://img-home.csdnimg.cn/images/20230410035452.png")+'"\x3e\r\n          \x3cdiv class\x3d"edit-box"\x3e\r\n            \x3cp class\x3d"notice"\x3e暂不支持编辑器内运行\x3c/p\x3e\r\n            \x3cdiv class\x3d"opt-box"\x3e\r\n              \x3cbutton class\x3d"btn-inscode btn-edit"\x3e编辑项目\x3c/button\x3e\r\n              \x3cbutton class\x3d"btn-inscode btn-preview"\x3e预览项目\x3c/button\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e'),
a.attributes["class"]="csdn-data-inscode",a},downcast:function(a){a.attributes["class"]="csdn-data-inscode";a.setHtml("This is an InsCode Widget.");return a},init:function(){this.setData("editurl",this.element.getAttribute("data-inscode-editurl"));this.setData("embedurl",this.element.getAttribute("data-inscode-embedurl"));this.setData("previewurl",this.element.getAttribute("data-inscode-previewurl"));this.setData("cover",this.element.getAttribute("data-inscode-cover"));this.setData("id",this.element.getAttribute("data-inscode-id"));
this.setData("name",this.element.getAttribute("data-inscode-name"));var a=this.editor,b=this;this.element.findOne(".btn-edit").on("click",function(){a.window.$.open(b.data.editurl,"_blank");a.config.codeSnippet_inscode&&a.config.codeSnippet_inscode.execReport("inscodemodaledit")});this.element.findOne(".btn-preview").on("click",function(){a.window.$.open(b.data.previewurl,"_blank");a.config.codeSnippet_inscode&&a.config.codeSnippet_inscode.execReport("inscodemodalpreview")})},data:function(){this.element.setAttribute("data-inscode-editurl",
this.data.editurl);this.element.setAttribute("data-inscode-embedurl",this.data.embedurl);this.element.setAttribute("data-inscode-previewurl",this.data.previewurl);this.element.setAttribute("data-inscode-cover",this.data.cover);this.element.setAttribute("data-inscode-id",this.data.id);this.element.setAttribute("data-inscode-name",this.data.name)},parts:{editurl:"data-inscode-editurl",embedurl:"data-inscode-embedurl",previewurl:"data-inscode-previewurl",cover:"data-inscode-cover",id:"data-inscode-id",
name:"data-inscode-name"}})}function r(a){var c=a.config.codeSnippet_codeClass,b=/\r?\n/g,k=new CKEDITOR.dom.element("textarea");a.widgets.add("codeSnippet",{allowedContent:"pre; code(language-*)",requiredContent:"pre",styleableElements:"pre",template:'\x3cpre\x3e\x3ccode class\x3d"'+c+' hljs"\x3e\x3c/code\x3e\x3c/pre\x3e',dialog:"codeSnippet",pathName:a.lang.codesnippet.pathName,mask:!1,parts:{pre:"pre",code:"code"},highlight:function(){var d=this,c=this.data,e=function(a){d.parts.code.setHtml(p?
a:a.replace(b,"\x3cbr\x3e"))};e(CKEDITOR.tools.htmlEncode(c.code));a._.codesnippet.highlighter.highlight(c.code,c.lang,function(d){a.fire("lockSnapshot");e(d);a.fire("unlockSnapshot")})},data:function(){var a=this.data,c=this.oldData;a.code&&this.parts.code.setHtml(CKEDITOR.tools.htmlEncode(a.code));c&&a.lang!=c.lang&&this.parts.code.removeClass("language-"+c.lang);a.lang&&(this.parts.code.addClass("language-"+a.lang),this.highlight());this.oldData=CKEDITOR.tools.copy(a)},upcast:function(d,b){if("pre"==
d.name){for(var e=!1,h=0;h<d.children.length&&(e="code"==d.children[h].name?!1:!0,e);h++);if(void 0!=d.attributes["class"]&&-1===d.attributes["class"].indexOf("has")&&e&&d.classes){var f=new CKEDITOR.htmlParser.element("code"),e=new CKEDITOR.htmlParser.text(d.getHtml());f.addClass("language-"+d.classes[0]);f.children[0]=e;d.children[0]=f;d.attributes["class"]="has"}for(var e=[],h=d.children,l,m=h.length-1;0<=m;m--)l=h[m],l.type==CKEDITOR.NODE_TEXT&&l.value.match(g)||e.push(l);if(1==e.length&&"code"==
(f=e[0]).name&&1==f.children.length&&f.children[0].type==CKEDITOR.NODE_TEXT){if(e=a._.codesnippet.langsRegex.exec(f.attributes["class"]))b.lang=e[1];k.setHtml(f.getHtml());b.code=k.getValue();f.addClass(c);return d}}},downcast:function(a){var b=a.getFirst("code");b.children.length=0;b.removeClass(c);b.add(new CKEDITOR.htmlParser.text(CKEDITOR.tools.htmlEncode(this.data.code)));return a}});var g=/^[\s\n\r]*$/}var p=!CKEDITOR.env.ie||8<CKEDITOR.env.version;CKEDITOR.plugins.add("codesnippet",{requires:"widget,dialog,richcombo",
lang:"en,zh,zh-cn",icons:"codesnippet,inscode",icontype:".svg",iconoffset:"center",iconbgsize:"16px",hidpi:!1,beforeInit:function(a){a._.codesnippet={};this.setHighlighter=function(c){a._.codesnippet.highlighter=c;c=a._.codesnippet.langs=a.config.codeSnippet_languages||c.languages;a._.codesnippet.langsRegex=new RegExp("(?:^|\\s)language-("+CKEDITOR.tools.objectKeys(c).join("|")+")(?:\\s|$)")}},onLoad:function(){CKEDITOR.dialog.add("codeSnippet",this.path+"dialogs/codesnippet.js")},init:function(a){a.ui.addButton&&
a.ui.addButton("CodeSnippet",{label:a.lang.codesnippet.button,command:"codeSnippet",toolbar:"insert,14"});a.addCommand("inscode",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){a.config.codeSnippet_inscode&&a.config.codeSnippet_inscode.execShowModal(a)},canUndo:!1});a.ui.addButton&&a.ui.addButton("InsCode",{label:"运行代码",command:"inscode"});if(a.ui.addRichCombo){var c={codeSnippet:"代码",inscode:"运行代码"};a.ui.addRichCombo("PanelCode",{icon:"codesnippet",
label:"代码",title:"代码",panel:{css:[CKEDITOR.skin.getPath("editor")].concat(a.config.contentsCss),multiSelect:!1,attributes:{"aria-label":"代码"}},init:function(){this.startGroup("代码");var b=["codeSnippet","inscode"],k;for(k in b){var g=b[k],d=CKEDITOR.skin.getIconStyle(g,"rtl"==a.lang.dir,void 0,void 0);this.add(g,'\x3cspan class\x3d"cke_combo_icon cke_combo_icon__panelcode cke_button_icon" style\x3d"'+d+'"\x3e'+c[g]+"\x3c/span\x3e",c[g])}},onClick:function(b){a.focus();a.fire("saveSnapshot");a.execCommand(b);
setTimeout(function(){a.fire("saveSnapshot")},0)}})}},afterInit:function(a){var c=this.path;r(a);q(a);if(!a._.codesnippet.highlighter){var b=new CKEDITOR.plugins.codesnippet.highlighter({languages:{bash:"Bash",cpp:"C++",cs:"C#",css:"CSS/SCSS/LESS",Dart:"Dart",Delphi:"Delphi",diff:"diff",vbnet:"VB.NET",Go:"Go",html:"HTML",java:"Java",javascript:"JavaScript",Kotlin:"Kotlin",objectivec:"Objective-C",perl:"Perl",php:"PHP",python:"Python",ruby:"Ruby",sql:"SQL",vbscript:"VBScript",Swift:"Swift",Erlang:"Erlang",
Scala:"Scala",Clojure:"Clojure",Cobol:"Cobol",CoffeeScript:"CoffeeScript",Lisp:"Lisp",Crystal:"Crystal",R:"R",rust:"Rust",Haskell:"Haskell",Lua:"Lua",Groovy:"Groovy",Puppet:"Puppet",TypeScript:"TypeScript",XML:"XML",Matlab:"MATLAB"},init:function(b){var g=this;p&&CKEDITOR.scriptLoader.load(c+"lib/highlight/highlight.pack.js",function(){g.hljs=window.hljs;CKEDITOR.scriptLoader.load(c+"lib/highlight/cobol.min.js");b();CKEDITOR.scriptLoader.load(c+"lib/highlight/highlightjs-line-numbers.min.js",function(){hljs.initLineNumbersOnLoad()})});
a.addContentsCss&&(a.addContentsCss(c+"lib/inscode/inscode.css"),a.addContentsCss(c+"lib/highlight/styles/"+a.config.codeSnippet_theme+".css"))},highlighter:function(a,b,c){(a=this.hljs.getLanguage(b)?this.hljs.highlight(a,{language:b}):this.hljs.highlightAuto(a))&&c(a.value)}});this.setHighlighter(b)}}});CKEDITOR.plugins.codesnippet={highlighter:n};n.prototype.highlight=function(){var a=arguments;this.ready?this.highlighter.apply(this,a):this.queue.push(function(){this.highlighter.apply(this,a)})}})();
CKEDITOR.config.codeSnippet_codeClass="hljs";CKEDITOR.config.codeSnippet_theme="default";