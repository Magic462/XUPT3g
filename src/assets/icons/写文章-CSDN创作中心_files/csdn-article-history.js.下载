"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();!function(){var n=function(n,e,t){window.addEventListener?function(){n.addEventListener(e,t,!1)}():function(){n.attachEvent("on"+e,t)}()},e=function(n,e,t){window.removeEventListener?function(){n.removeEventListener(e,t,!1)}():function(){n.detachEvent("on"+e,t)}()},t=function(n,e,t){return n+(-1===n.indexOf("?")?"?":"&")+e+"="+t},r=function(){var n=document.head,e=n.firstElementChild||n.firstChild,t=document.createElement("style");t.innerText="\n      .article-history-box {\n        position: relative;\n        width: 960px;\n        top: 50%;\n        left: 50%;\n        max-height: 885px;\n        height: 85vh;\n        transform: translate(-50%, -50%);\n        border-radius: 4px;\n        overflow: hidden;\n        background-color: #fff;\n      }\n      .article-history-box.csdn-vote {\n        transform: unset;\n        top: unset;\n        left: unset;\n        width: unset;\n      }\n      .article-history-box::-webkit-scrollbar {\n        width: 4px;\n      }\n      .article-history-box::-webkit-scrollbar-thumb {\n        background: rgba(142, 149, 154, 0.2);\n        border-radius: 2px;\n      }\n      .article-history-box .pos-box {\n        position: relative;\n        box-sizing: content-box;\n        width: 100%;\n        height: 100%;\n      }\n      .article-history-box .btn-close {\n        position: absolute;\n        text-align: center;\n        top: 0;\n        width: 36px;\n        height: 36px;\n        right: 0;\n        line-height: 36px;\n        border: none;\n        background-color: transparent;\n        cursor: pointer;\n      }\n      .article-history-box .article-history-frame {\n        width: 100%;\n        height: 100%;\n        border: none;\n      }\n      .article-history-box-mask {\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background-color: rgba(0, 0, 0, 0.6);\n        z-index: 99;\n        overflow: hidden;\n      }\n    ",n.insertBefore(t,e)},i=function(n){var e='\n      <div class="article-history-box">\n        <div class="pos-box">\n          <button class="btn-close" title="关闭"><span style="display: inline-block; color: rgb(153, 153, 153); font-size: 22px; cursor: pointer; user-select: none;">×</span></button>\n          <iframe\n            class="article-history-frame"\n            name="articleHistoryFrame"\n            src="'+n+'"\n            frameborder="0"\n            scrolling="no"\n          ></iframe>\n        </div>\n      </div>\n    ',t=document.createElement("div");return t.className="article-history-box-mask",t.innerHTML=e,t},o=function(){function o(n){if(_classCallCheck(this,o),n){var e=n.articleId,t=n.title,r=n.content,i=n.isHtml;this.articleId=e,this.title=t,this.content=r,this.isHtml=i}window.document.domain="csdn.net",this.ready=!0}return _createClass(o,[{key:"recordHistory",value:function(n,e,t){this.title=n,this.content=e,this.type=t}},{key:"hasDiff",value:function(n){var e=this.getType(n),t=n.title,r=this.isHtml?n.content:n.markdowncontent;return this.type&&[1,2].indexOf(this.type)>-1&&-1===[1,2].indexOf(e)?(this.recordHistory(t,r),this.type=e,!0):t===this.title&&r===this.content?(this.type=e,!1):(this.recordHistory(t,r,e),!0)}},{key:"getType",value:function(n){var e=n.status,t=void 0,r=void 0;this.isHtml?(t=n.not_auto_saved,r=n.scheduled_time?n.scheduled_time:""):(t=parseInt(n.not_auto_saved),r=n.scheduled_time?n.scheduled_time:"");return t?2===e?2:""!==r?5:3:1}},{key:"show",value:function(o){var s=this;if(r(),o.hasOwnProperty("articleId")&&o.hasOwnProperty("isHtml")&&o.hasOwnProperty("recoverFun")){var a={url:"https://app-blog.csdn.net/component/article_history",from:encodeURIComponent(window.location.origin)};a.url=o.url?o.url:a.url,a.url=a.url+"/"+o.articleId+"/"+(o.isHtml?"1":"0"),a.url=t(a.url,"from",a.from);var c=i(a.url),l=function n(t){var r=t.data.type,i=t.data.data;switch(r){case"recover":o.recoverFun(i),s.hide(c);break;case"hide":s.hide(c),e(window,"message",n);break;case"linkTo":var a=document.createElement("a");document.body.appendChild(a),a.href=i.url,a.target=i.target?i.target:"_blank",a.click(),document.body.removeChild(a)}};if(n(window,"message",l),c){var d=c.querySelector(".btn-close");return n(d,"click",function(){s.hide(c),e(window,"message",l)}),document.scrollingElement.style.overflow="hidden",document.body.appendChild(c),c}return void 0,null}return void 0,null}},{key:"hide",value:function(n){document.scrollingElement.style.overflow="",n&&n.remove()}},{key:"version",get:function(){return"v1.0.1"}}]),o}();csdn.articleHistory=csdn.articleHistory?csdn.articleHistory:{},csdn.articleHistory=o}(window.csdn=window.csdn||{});